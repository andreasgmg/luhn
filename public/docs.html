<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dokumentation | Luhn.se</title>
    <link rel="stylesheet" href="style.css">
    <meta name="description"
        content="Dokumentation f칬r Luhn.se API. Endpoints f칬r Person, F칬retag, BankID, Fordon, Kreditkort och IMEI.">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>游젏릖</text></svg>">
</head>

<body>
    <header>
        <div class="container nav-content">
            <a href="/" class="logo">luhn<span>.se</span></a>
            <div id="nav-links-container" class="nav-links">
                 <a href="/">Generatorn</a>
                 <a href="mailto:hej@luhn.se">Kontakt</a>
                 <a href="/login" style="margin-left: 30px;">Logga In</a>
                 <a href="/register"><button class="action-btn" style="padding: 8px 16px; margin-left: 15px; font-size: 0.9rem;">Registrera</button></a>
            </div>
        </div>
    </header>

    <div class="docs-wrapper">
        <aside class="docs-sidebar">
            <nav id="docs-nav">
                <ul>
                    <li><a href="#introduction">Introduktion</a></li>
                    <li><a href="#authentication">Autentisering</a></li>
                    <li><a href="#rate-limits">Rate Limits</a></li>
                    <li><a href="#global-parameters">Globala Parametrar</a></li>
                    <li><a href="#scenario-builder">Scenario Builder</a></li>
                    <li class="group-header">Core Generators</li>
                    <li><a href="#person">Person</a></li>
                    <li><a href="#company">F칬retag</a></li>
                    <li><a href="#finance">Ekonomi</a></li>
                    <li><a href="#vehicle">Fordon</a></li>
                    <li><a href="#creditcard">Kreditkort</a></li>
                    <li><a href="#imei">IMEI</a></li>
                    <li class="group-header">Komplexa Fl칬den</li>
                    <li><a href="#identity">Hel Identitet</a></li>
                    <li><a href="#bankid">BankID Mock</a></li>
                    <li class="group-header">Verktyg</li>
                    <li><a href="#validator">Validator</a></li>
                    <li><a href="#masking">Data Maskning</a></li>
                </ul>
            </nav>
        </aside>

        <main class="docs-content">
            <section id="introduction">
                <h2>Introduktion</h2>
                <p>V칛lkommen till dokumentationen f칬r Luhn.se, ett API f칬r att generera svensk test- och mockdata. API:et 칛r designat f칬r att vara enkelt att anv칛nda och f칬ruts칛gbart.</p>
                <p>Alla GET-endpoints returnerar data i JSON-format som standard. F칬r de flesta endpoints kan du 칛ven f친 svar i XML-format genom att l칛gga till <code>?format=xml</code> i din anrops-URL.</p>
            </section>

            <section id="authentication">
                <h2>Autentisering</h2>
                <p>F칬r att f친 tillg친ng till h칬gre rate limits (Pro- och Team-planer) beh칬ver du autentisera dig med en API-nyckel. Du hittar din nyckel p친 din <a href="/profile">profilsida</a> efter att du har startat en prenumeration.</p>
                <p>Skicka med din API-nyckel i en `x-api-key` header i dina anrop:</p>
                <div class="code-block">curl "https://luhn.se/api/person" -H "x-api-key: YOUR_API_KEY"</div>
                 <p>Om du inte skickar med en nyckel kommer du att anv칛nda den gener칬sa "Hobby"-planen, d칛r din IP-adress anv칛nds f칬r rate limiting.</p>
            </section>

            <section id="rate-limits">
                <h2>Rate Limits</h2>
                <p>API:et anv칛nder ett dubbelt rate limit-system f칬r att s칛kerst칛lla h칬g tillg칛nglighet f칬r alla.</p>
                <ul class="value-list">
                    <li><b>Standard Limit:</b> G칛ller f칬r alla anrop. Begr칛nsar antalet anrop du kan g칬ra per 15-minutersf칬nster (se <a href="/#pricing">prislistan</a> f칬r detaljer).</li>
                    <li><b>Bulk Limit:</b> En separat, striktare gr칛ns f칬r anrop som beg칛r mer 칛n 100 rader data (t.ex. <code>?amount=101</code>). Du kan g칬ra upp till 10 s친dana "bulk-anrop" per timme.</li>
                </ul>
            </section>

            <section id="global-parameters">
                <h2>Globala Parametrar</h2>
                <p>Dessa query-parametrar kan anv칛ndas p친 de flesta GET-endpoints f칬r att styra svaret.</p>
                <table class="param-table">
                    <thead><tr><th>Parameter</th><th>Beskrivning</th><th>Exempel</th></tr></thead>
                    <tbody>
                        <tr><td>amount</td><td>Antal objekt som ska genereras (1-100 f칬r Hobby, upp till 10,000 f칬r Pro/Team).</td><td><code>?amount=5</code></td></tr>
                        <tr><td>seed</td><td>Anv칛nd ett "fr칬" f칬r att f친 deterministisk (samma) data vid varje anrop.</td><td><code>?seed=test123</code></td></tr>
                        <tr><td>delay</td><td>Simulera n칛tverkslagg genom att f칬rdr칬ja svaret (i millisekunder).</td><td><code>?delay=1500</code></td></tr>
                        <tr><td>status</td><td>Tvinga servern att svara med en specifik HTTP-statuskod f칬r att testa felhantering.</td><td><code>?status=500</code></td></tr>
                        <tr><td>format</td><td>F친 svaret i XML-format ist칛llet f칬r JSON.</td><td><code>?format=xml</code></td></tr>
                    </tbody>
                </table>
            </section>
            
            <section id="scenario-builder">
                <h2>Scenario Builder</h2>
                <p>F칬r endpoints som <code>/api/person</code> och <code>/api/identity</code> kan du styra egenskaperna hos den genererade datan.</p>
                <table class="param-table">
                     <thead><tr><th>Parameter</th><th>Beskrivning</th><th>Exempel</th></tr></thead>
                    <tbody>
                        <tr><td>minAge</td><td>Minsta 친lder p친 de genererade personerna.</td><td><code>?minAge=18</code></td></tr>
                        <tr><td>maxAge</td><td>H칬gsta 친lder p친 de genererade personerna.</td><td><code>?maxAge=65</code></td></tr>
                        <tr><td>city</td><td>Generera endast personer med adresser i en specifik stad (t.ex. Stockholm, G칬teborg, Malm칬).</td><td><code>?city=Malm칬</code></td></tr>
                        <tr><td>invalidRate</td><td>En procentsats (0-100) f칬r chansen att ett genererat personnummer 칛r medvetet ogiltigt.</td><td><code>?invalidRate=10</code></td></tr>
                    </tbody>
                </table>
            </section>
            
             <section id="person">
                <h3>Person</h3>
                <p>Genererar realistiska svenska personer med namn, address och kontaktuppgifter.</p>
                <div class="code-block" onclick="copyCode(this)">GET /api/person</div>
            </section>
            
            <section id="company">
                 <h3>F칬retag</h3>
                <p>Genererar svenska aktiebolag med giltiga organisations- och momsnummer.</p>
                <div class="code-block" onclick="copyCode(this)">GET /api/company</div>
            </section>
            
            <!-- Add all other sections here -->

        </main>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 Luhn.se</p>
        </div>
    </footer>

    <div id="toast" class="toast"></div>

    <script src="/pocketbase.umd.js"></script>
    <script src="/auth.js"></script>
    <script>
        // Docs-specific JS
        function copyCode(el) {
            navigator.clipboard.writeText(el.innerText).then(() => {
                const toast = document.getElementById('toast');
                toast.innerText = "Kopierat! 游늶";
                toast.classList.add('show');
                setTimeout(() => toast.classList.remove('show'), 2000);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Logic to handle nav links
            const pb = window.pb;
            const navLinksContainer = document.getElementById('nav-links-container');
            if (navLinksContainer && pb) {
                if (pb.authStore.isValid) {
                    navLinksContainer.innerHTML = `
                        <a href="/">Generatorn</a>
                        <a href="/profile" style="margin-left: 30px;">Min Profil</a>
                        <a href="#"><button id="logout-btn-nav" class="action-btn outline-btn" style="padding: 8px 16px; margin-left: 15px; font-size: 0.9rem;">Logga Ut</button></a>
                    `;
                    document.getElementById('logout-btn-nav').addEventListener('click', (e) => {
                        e.preventDefault();
                        pb.authStore.clear();
                        window.location.href = '/';
                    });
                }
            }

            // Logic for sticky nav and scrollspy
            const nav = document.getElementById('docs-nav');
            const sections = document.querySelectorAll('.docs-content section');
            const navLinks = nav.querySelectorAll('a');

            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href').substring(1) === entry.target.id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { rootMargin: "-50% 0px -50% 0px" });

            sections.forEach(section => observer.observe(section));
        });
    </script>
</body>
</html>